#!/usr/bin/env python
# encoding: utf-8

def build(bld):
    vehicle = bld.path.name
    bld.ap_stlib(
        name=vehicle + '_libs',
        ap_vehicle=vehicle,
        ap_libraries=bld.ap_common_vehicle_libraries() + [
            'AP_ADSB',
            'AC_AttitudeControl',
            'AC_InputManager',
            'AC_Fence',
            'AC_Avoidance',
            'AC_PID',
            'AC_PrecLand',
            'AC_Sprayer',
            'AC_WPNav',
            'AP_Camera',
            'AP_IRLock',
            'AP_InertialNav',
            'AP_LandingGear',
            'AP_Menu',
            'AP_Motors',
            'AP_Parachute',
            'AP_RCMapper',
            'AP_Relay',
            'AP_ServoRelayEvents',
            'AP_Avoidance',
            'AP_AdvancedFailsafe',
            'AP_Proximity',
            #### Copter 3.4 libraries ####
            'AP_EPM',
            'AP_Frsky_Telem',
            'AP_Proximity',
            #### Copter 3.5 libraries ####
            #'AP_Stats',
            #'AP_Gripper',
            #'AP_Beacon',
            #'AP_VisualOdom',
            'AP_Arming',
            'AP_Telemetry',
        ],
    )

    vehicle = bld.path.name
    bld.ap_program(
        program_name='arducopter',
        program_groups=['bin', 'copter'],
        use=[vehicle + '_libs'],
        defines=['FRAME_CONFIG=QUAD_FRAME','USERHOOK_SUPERSLOWLOOP=1'],
        )

    bld.ap_program(
        program_name='arducopter-heli',
        program_groups=['bin', 'copter'],
        use=vehicle + '_libs',
        defines=['FRAME_CONFIG=HELI_FRAME','USERHOOK_SUPERSLOWLOOP=1'],
        )
